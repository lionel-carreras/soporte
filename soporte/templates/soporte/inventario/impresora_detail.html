{% extends 'soporte/app.html' %}
{% load static %}

{% block title %}Detalle de impresora{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="mb-0">Detalle de impresora</h4>
</div>

<div class="card">
  <div class="card-body">
    <div class="row g-4 align-items-start">
      <!-- Columna izquierda: datos -->
      <div class="col-md-7"><br><br>
        <div class="mb-2"><strong>Sucursal:</strong> {{ imp.sucursal.nombre }}</div>
        <div class="mb-2"><strong>Marca / Modelo:</strong> {{ imp.marca }} {{ imp.modelo }}</div>
        <div class="mb-2"><strong>N° de serie:</strong> {{ imp.nro_serie }}</div>
        <div class="mb-2"><strong>Conexión:</strong> {{ imp.conexion }}</div>
        <div class="mb-2"><strong>IP / PC:</strong> {{ imp.ip|default:"—" }}</div>
        <div class="mb-2"><strong>Propiedad:</strong> {{ imp.get_propiedad_display }}</div>
        <div class="mb-2"><strong>Toner:</strong> {{ imp.toner|default:"—" }}</div>
        <div class="mb-3"><strong>Activa:</strong>
          {% if imp.activa %}<span class="badge text-bg-success">Sí</span>{% else %}<span class="badge text-bg-secondary">No</span>{% endif %}
        </div><br>

        {% if imp.ubicacion %}
          <div class="mb-2"><strong>Ubicación:</strong> {{ imp.ubicacion }}</div>
        {% endif %}
        {% if imp.notas %}
          <div class="mb-3"><strong>Notas:</strong><br>{{ imp.notas|linebreaksbr }}</div>
        {% endif %}

        <div class="text-muted small">
          Creada: {{ imp.created_at|date:"d/m/Y H:i" }} • Actualizada: {{ imp.updated_at|date:"d/m/Y H:i" }}
        </div>
      </div>

      <!-- Columna derecha: QR + acciones -->
      <div class="col-md-5">
        <div class="border rounded p-3 text-center">
          <div class="fw-semibold mb-2">IT Expreso Brio</div>
          <img
            src="{% url 'inventario:impresora_qr' imp.id %}?v={{ imp.updated_at|date:'U' }}"
            alt="QR"
            class="img-fluid"
            style="max-width: 260px; image-rendering: pixelated;"
          >
          <div class="mt-3 d-flex flex-wrap gap-2 justify-content-center">
            <a class="btn btn-outline-secondary btn-sm"
               href="{% url 'inventario:impresora_qr' imp.id %}?download=1">
              Descargar PNG
            </a>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

